{% load static %}
{% load main_extras %}

<div class="list-group">
    <div class="row">
        <div class="col-xl-12 col-lg-7">
            <div class="card shadow mb-4">
                <div class="card-body bg-translucent-primary">
                    <table class="table">
                        <thead>
                        <tr>
                            {#                            <th class="text-right"># ({{ job.jobstage_set.all|length }})</th>#}
                            <th>Status</th>
                            <th>Message</th>
                            <th>Started At</th>
                            <th>Duration</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for job_stage in job.jobstage_set.all|dictsort:"pk" %}
                            <tr>
                                {#                                <td class="text-right">Stage-{{ job_stage.pk }}</td>#}
                                <td class="text-center">
                                    <span class="{% if job_stage.status == 'progress' %}spinner-grow spinner-grow-sm{% endif %}
                                                 dot-wo-text-{{ job_stage.status|get_status_badge }}"></span>
                                </td>
                                <td>
                                    {{ job_stage.message|safe }}
                                </td>
                                <td>{{ job_stage.started_at }}</td>
                                <td>{{ job_stage.duration }}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>